(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{209:function(a,i,t){"use strict";t.r(i);var s=t(0),e=Object(s.a)({},(function(){var a=this,i=a.$createElement,t=a._self._c||i;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"给ext-net管理系统添加路由"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#给ext-net管理系统添加路由"}},[a._v("#")]),a._v(" 给EXT. NET管理系统添加路由")]),a._v(" "),t("p",[a._v("我们目前的管理系统是单页应用（上面是logo，左边是菜单栏，右边是具体页面），打开的页面一直是Main.aspx，一旦页面刷新，右边具体页面又会回复到Home.aspx，所以为了实现通过不同的 URL 访问不同的内容的功能，需要在原代码上做以下修改。")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/13908708-c98b67927fed9aa3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),a._v(" "),t("p",[a._v("先来一张效果图镇楼")]),a._v(" "),t("p",[a._v("要改的代码主要有以下几个文件")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("1、Default.aspx.cs\n2、Main.aspx\n3、Main.aspx.cs\n4、Main.js\n")])])]),t("p",[t("strong",[a._v("修改登录跳转链接Default.aspx.cs（可选）")])]),a._v(" "),t("p",[a._v("用户输入正确的账号密码的后跳转Main.aspx页面，此时有两种链接写法，第一种直接跳转去Main.aspx页面，第二种跳转去带参数的Main.aspx页面，例如Main.aspx#/modules/Manage/V3/ZK_ARTICLES_MA.aspx，具体还是看需求")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/13908708-c6a74b513d1dd59a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),a._v(" "),t("p",[t("strong",[a._v("修改Main.aspx页面 Main.aspx")])]),a._v(" "),t("p",[a._v("需要用到Main.js，所以要把它引用进来")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/13908708-6e0ba9bfe908cd73.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),a._v(" "),t("p",[a._v("其次，样式也对应的发生了改变，需要的话可以替换Main.css")]),a._v(" "),t("p",[a._v("还有，为了防止在菜单栏搜索栏中回车触发表单提交，所以要把该页面的form表单去掉")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/13908708-991974bf702cce90.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),a._v(" "),t("p",[a._v("最后，为了使右边具体页面有右键菜单，还需要做以下修改")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/13908708-b9b95f5da8d98dfb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),a._v(" "),t("p",[t("strong",[a._v("修改获取权限数据部分Main.aspx.cs")])]),a._v(" "),t("p",[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/13908708-2ec720e65cba3053.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),a._v(" "),t("p",[a._v("总体思路是通过client. Permission_GetPermitList()获取权限信息，然后动态创建菜单树、并保存权限信息给前台")]),a._v(" "),t("p",[a._v("首先先创建一个js的权限类JsPermit")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/13908708-a9a41da660bef5b3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),a._v(" "),t("p",[a._v("然后设置一个全局变量jspermit")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/13908708-44b883630268a4ed.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),a._v(" "),t("p",[a._v("动态创建菜单栏面板")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/13908708-0ee9400dca2a2969.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),a._v(" "),t("p",[a._v("注意核心代码，功能是让该面板下的节点点击时触发加载页面事件")]),a._v(" "),t("p",[a._v("动态创建菜单栏节点（递归）")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/13908708-25e2661e6fa81fa6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),a._v(" "),t("p",[a._v("注意添加href处的代码，如果需要token应该选被注释掉的代码")]),a._v(" "),t("p",[a._v("保存权限信息去前台")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/13908708-71a1b05cd363b90e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),a._v(" "),t("p",[t("strong",[a._v("监听路由")]),a._v("** Main.js**")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/13908708-0adb5b7adb2af1ce.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),a._v(" "),t("p",[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/13908708-f70ebf50c958e223.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),a._v(" "),t("hr"),a._v(" "),t("p",[t("em",[a._v("ps：貌似页面会加载两次，如果发现有问题，后人可以去完善")])])])}),[],!1,null,null,null);i.default=e.exports}}]);