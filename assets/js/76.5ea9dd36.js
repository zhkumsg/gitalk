(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{149:function(t,a,s){"use strict";s.r(a);var n=s(0),p=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"腾讯qq授权登录（asp-net-angular）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#腾讯qq授权登录（asp-net-angular）"}},[t._v("#")]),t._v(" 腾讯QQ授权登录（asp.net + angular）")]),t._v(" "),s("p",[t._v("在前面QQ互联稍微介绍过一下，这里进行详细介绍。")]),t._v(" "),s("p",[s("strong",[t._v("成为开发者")])]),t._v(" "),s("p",[t._v("首先打开QQ互联官网"),s("a",{attrs:{href:"https://connect.qq.com/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://connect.qq.com/index.html"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("点击注册，完善相关信息")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/13908708-0c0159e4625936c0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),t._v(" "),s("p",[t._v("QQ互联")]),t._v(" "),s("p",[s("strong",[t._v("完成开发者认证")])]),t._v(" "),s("p",[t._v("在菜单上选择应用管理，进入后选择开发者认证，填写个人信息")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/13908708-c8bb3d65d155cf4d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),t._v(" "),s("p",[t._v("实名认证")]),t._v(" "),s("p",[s("strong",[t._v("创建网站应用")])]),t._v(" "),s("p",[t._v("完成开发者认证后，选择创建网站应用（提醒：同一个域名不需要创建多个应用，添加回调域即可）")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/13908708-10f4038e96dd45c7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),t._v(" "),s("p",[t._v("创建网站应用（PC和H5）")]),t._v(" "),s("p",[t._v("需要准备的资料主要有：")]),t._v(" "),s("p",[t._v("1、完成备案的域名")]),t._v(" "),s("p",[t._v("2、开发好的网站")]),t._v(" "),s("p",[t._v("3、服务器")]),t._v(" "),s("p",[t._v("做这步之前要先把网站大体开发好，同时部署到外网，有备案的域名，开放到80端口。")]),t._v(" "),s("p",[t._v("认证是一般选择添加一个腾讯提供的文件到网站根目录（验证开发者的权限）")]),t._v(" "),s("p",[t._v("特别注意：")]),t._v(" "),s("p",[t._v("回调域填写很重要、很重要、很重要（重要的事说三遍）")]),t._v(" "),s("p",[t._v("比如我的域名为_www.baidu.com_")]),t._v(" "),s("p",[t._v("那么网站域名输入框就填_www.baidu.com_")]),t._v(" "),s("p",[t._v("登陆回调页面假设为根目录下的logincallback.html，那么此时我的网站回调域就可以填_http://www.baidu.com/logincallback.html_（填http还是https得看网站类型）")]),t._v(" "),s("p",[t._v("假如二级域名也想接入登陆，二级域名为_msg.baidu.com_，同时登陆回调页面也为根目录下的logincallback.html，那么此时就需要修改域名回调域，添加一条记录_http://msg.baidu.com/logincallback.html_")]),t._v(" "),s("p",[t._v("至此，网站回调域应该为："),s("a",{attrs:{href:"http://www.baidu.com/login.html;http:/msg.baidu.com/login",target:"_blank",rel:"noopener noreferrer"}},[s("em",[t._v("http://www.baidu.com/logincallback.html;http://msg.baidu.com/login")]),s("OutboundLink")],1),s("em",[t._v("callback.html")])]),t._v(" "),s("p",[s("strong",[t._v("登陆页面配置")])]),t._v(" "),s("p",[t._v("一般来说都是在登录页面上添加第三方登录链接的（QQ、微博、微信），所以登录页面需要做一些就修改")]),t._v(" "),s("p",[t._v("添加链接")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("btn btn-primary"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://graph.qq.com/oauth2.0/authorize?client_id=填写openid&response_type=token&scope=all&redirect_uri=填写回调地址"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("一键登录"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("为了自定义开发，不采用官网推荐的写法，直接采用超链接方式。")]),t._v(" "),s("p",[s("strong",[t._v("回调页面配置")])]),t._v(" "),s("p",[t._v("回调页面是网站回调域里面的一个页面，需要做以下几处修改。")]),t._v(" "),s("p",[t._v("导入js文件")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text/javascript"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://qzonestyle.gtimg.cn/qzone/openapi/qc_loader.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("   "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("data-appid")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("这里填appid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("data-redirecturi")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("这里填回调域对于地址"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("   "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("utf-8"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("appid在QQ互联官网>应用管理下的具体应用下可以看到，回调域网址是当前页面的外网地址（当然得先在应用回调域里配好）")]),t._v(" "),s("p",[t._v("调用api")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/13908708-e186b60f72e6d30b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),t._v(" "),s("p",[t._v("调起QQ登陆")]),t._v(" "),s("p",[t._v("先调用api里获取用户信息（get_user_info）接口，然后在回调函数里调用获取登录信息方法（QC. Login.getMe），成功后容易取得用户信息（常见的字段有用户开放id：openid，昵称：nickname，性别：gender，头像：figureurl_qq_2，），更多信息可通过控制台查看相关数据。")]),t._v(" "),s("p",[t._v("完成数据获取后，对数据进行相关处理，然后提交给后台，完成登录。")]),t._v(" "),s("p",[s("strong",[t._v("结束语")])]),t._v(" "),s("p",[t._v("QQ一键意义在于接入腾讯海量用户，减低网站注册门槛，实现社交关系的零成本引入和优质内容的快速传播。")]),t._v(" "),s("p",[t._v("记住密码功能有安全漏洞，主要表现为只提供openid就可以完成登录，这个在开发的时候要酌情考虑，采用恰当的方式来完成，提高安全性能。")])])}),[],!1,null,null,null);a.default=p.exports}}]);