<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>nginx的安装与配置 | Wiki文档中心</title>
    <meta name="description" content="描述">
    <link rel="icon" href="/logo.png">
    
    <link rel="preload" href="/assets/css/0.styles.4d8ba4a7.css" as="style"><link rel="preload" href="/assets/js/app.3328e81d.js" as="script"><link rel="preload" href="/assets/js/2.c715c0f2.js" as="script"><link rel="preload" href="/assets/js/15.76570f77.js" as="script"><link rel="prefetch" href="/assets/js/10.abfcde09.js"><link rel="prefetch" href="/assets/js/11.3ee26f26.js"><link rel="prefetch" href="/assets/js/12.45406b92.js"><link rel="prefetch" href="/assets/js/13.7aa97305.js"><link rel="prefetch" href="/assets/js/14.34708031.js"><link rel="prefetch" href="/assets/js/16.29d4e7cd.js"><link rel="prefetch" href="/assets/js/17.eda984dd.js"><link rel="prefetch" href="/assets/js/18.1bb9f9b9.js"><link rel="prefetch" href="/assets/js/19.231ae034.js"><link rel="prefetch" href="/assets/js/20.26a455ac.js"><link rel="prefetch" href="/assets/js/21.62f18186.js"><link rel="prefetch" href="/assets/js/22.177e8b0f.js"><link rel="prefetch" href="/assets/js/23.60274af5.js"><link rel="prefetch" href="/assets/js/24.0ea00a49.js"><link rel="prefetch" href="/assets/js/25.3d5be951.js"><link rel="prefetch" href="/assets/js/26.19229e66.js"><link rel="prefetch" href="/assets/js/27.6d99c0ab.js"><link rel="prefetch" href="/assets/js/28.d28de4e0.js"><link rel="prefetch" href="/assets/js/29.29379faf.js"><link rel="prefetch" href="/assets/js/3.90a63800.js"><link rel="prefetch" href="/assets/js/30.9fe6691b.js"><link rel="prefetch" href="/assets/js/31.2c753b40.js"><link rel="prefetch" href="/assets/js/32.b87ed25b.js"><link rel="prefetch" href="/assets/js/33.69099052.js"><link rel="prefetch" href="/assets/js/34.fb2e76ab.js"><link rel="prefetch" href="/assets/js/35.41f3d46b.js"><link rel="prefetch" href="/assets/js/36.78adf827.js"><link rel="prefetch" href="/assets/js/37.6cb8f1dc.js"><link rel="prefetch" href="/assets/js/38.3296535c.js"><link rel="prefetch" href="/assets/js/39.852ec6ec.js"><link rel="prefetch" href="/assets/js/4.338175e6.js"><link rel="prefetch" href="/assets/js/40.4f030cd4.js"><link rel="prefetch" href="/assets/js/41.7b948635.js"><link rel="prefetch" href="/assets/js/42.7038bdd7.js"><link rel="prefetch" href="/assets/js/43.09ba85b3.js"><link rel="prefetch" href="/assets/js/44.30c43542.js"><link rel="prefetch" href="/assets/js/45.7fc52c71.js"><link rel="prefetch" href="/assets/js/46.e57513f1.js"><link rel="prefetch" href="/assets/js/47.79ad04e1.js"><link rel="prefetch" href="/assets/js/48.806e5af9.js"><link rel="prefetch" href="/assets/js/49.1e083288.js"><link rel="prefetch" href="/assets/js/5.15ce4230.js"><link rel="prefetch" href="/assets/js/50.eef1990e.js"><link rel="prefetch" href="/assets/js/51.cdde33a8.js"><link rel="prefetch" href="/assets/js/52.bcb09293.js"><link rel="prefetch" href="/assets/js/53.87c2baec.js"><link rel="prefetch" href="/assets/js/54.4d9707e7.js"><link rel="prefetch" href="/assets/js/55.5fb2a242.js"><link rel="prefetch" href="/assets/js/56.63b1cb46.js"><link rel="prefetch" href="/assets/js/57.4108fa62.js"><link rel="prefetch" href="/assets/js/58.38c656c4.js"><link rel="prefetch" href="/assets/js/59.2e9da043.js"><link rel="prefetch" href="/assets/js/6.4db8bcb4.js"><link rel="prefetch" href="/assets/js/60.62a9603a.js"><link rel="prefetch" href="/assets/js/61.70db4cce.js"><link rel="prefetch" href="/assets/js/62.c0b27237.js"><link rel="prefetch" href="/assets/js/63.a1ff59d9.js"><link rel="prefetch" href="/assets/js/64.ba32929f.js"><link rel="prefetch" href="/assets/js/65.504fa9a6.js"><link rel="prefetch" href="/assets/js/66.39a7e2d4.js"><link rel="prefetch" href="/assets/js/67.409ffc00.js"><link rel="prefetch" href="/assets/js/68.21b084fc.js"><link rel="prefetch" href="/assets/js/69.1d10efe9.js"><link rel="prefetch" href="/assets/js/7.6832275b.js"><link rel="prefetch" href="/assets/js/70.0391f331.js"><link rel="prefetch" href="/assets/js/71.af289666.js"><link rel="prefetch" href="/assets/js/72.9a8504b0.js"><link rel="prefetch" href="/assets/js/73.0d35f166.js"><link rel="prefetch" href="/assets/js/74.75cd3652.js"><link rel="prefetch" href="/assets/js/75.53679119.js"><link rel="prefetch" href="/assets/js/76.5ea9dd36.js"><link rel="prefetch" href="/assets/js/77.95fe4c15.js"><link rel="prefetch" href="/assets/js/78.aaff367b.js"><link rel="prefetch" href="/assets/js/8.3662cfcf.js"><link rel="prefetch" href="/assets/js/9.a40092b3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4d8ba4a7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="Wiki文档中心" class="logo"> <span class="site-name can-hide">Wiki文档中心</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/introduce/" class="nav-link">指南</a></div><div class="nav-item"><a href="/sso/" class="nav-link">单点登录</a></div><div class="nav-item"><a href="/seo/" class="nav-link">服务端渲染</a></div><div class="nav-item"><a href="/linux/" class="nav-link router-link-active">Linux基础</a></div><div class="nav-item"><a href="/http/" class="nav-link">解读Http</a></div><div class="nav-item"><a href="/microfrontend/" class="nav-link">微前端</a></div><div class="nav-item"><a href="/weixin/" class="nav-link">微信全家桶</a></div><div class="nav-item"><a href="/performance/" class="nav-link">性能优化</a></div><div class="nav-item"><a href="/log/" class="nav-link">每日随笔</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/introduce/" class="nav-link">指南</a></div><div class="nav-item"><a href="/sso/" class="nav-link">单点登录</a></div><div class="nav-item"><a href="/seo/" class="nav-link">服务端渲染</a></div><div class="nav-item"><a href="/linux/" class="nav-link router-link-active">Linux基础</a></div><div class="nav-item"><a href="/http/" class="nav-link">解读Http</a></div><div class="nav-item"><a href="/microfrontend/" class="nav-link">微前端</a></div><div class="nav-item"><a href="/weixin/" class="nav-link">微信全家桶</a></div><div class="nav-item"><a href="/performance/" class="nav-link">性能优化</a></div><div class="nav-item"><a href="/log/" class="nav-link">每日随笔</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/linux/" class="sidebar-link">linux 基础</a></li><li><a href="/linux/how-to-use-ssh.html" class="sidebar-link">远程工具的使用</a></li><li><a href="/linux/how-to-use-samba.html" class="sidebar-link">映射网络驱动器</a></li><li><a href="/linux/how-to-use-script.html" class="sidebar-link">常用命令的使用</a></li><li><a href="/linux/how-to-install-nodejs.html" class="sidebar-link">nodejs的安装及配置</a></li><li><a href="/linux/how-to-install-nginx.html" class="active sidebar-link">nginx的安装与配置</a></li><li><a href="/linux/how-to-install-mysql.html" class="sidebar-link">mysql的安装与使用</a></li><li><a href="/linux/how-to-protect-mysql.html" class="sidebar-link">mysql安全防范</a></li><li><a href="/linux/use-pm2-to-production-web.html" class="sidebar-link">使用PM2部署nodejs应用</a></li><li><a href="/linux/nginx-share-80-port.html" class="sidebar-link">多个服务共用80端口</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="nginx的安装与配置"><a href="#nginx的安装与配置" class="header-anchor">#</a> nginx的安装与配置</h1> <p>在linux下有比较多的web代理软件，如nginx、squid等，比较流行的是nginx，相比于window下的iis，或者java专用的tomcat，nginx更叫小巧易用。</p> <p><img src="http://upload-images.jianshu.io/upload_images/13908708-8ade75452d093c9a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>nginx</p> <p>nginx除了可以在linux上运行外，还有window的移植版，下面主要是介绍如何在linux下安装配置nginx代理服务器。</p> <p>说到安装软件，我们习惯了在window上双击exe可执行文件直接安装，而在linux下软件安装的形式不太一样。linux的软件安装大致可以分为下面三种</p> <div class="language- extra-class"><pre class="language-text"><code>通过yum安装

通过源码安装

通过rpm安装
</code></pre></div><p>三种安装方式各有差异，yum形式类似于npm安装，简单快捷，自动安装相关依赖；源码安装需要下载源码然后本机编译，可以实现个性化定制，适用于对linux了解较多的进阶用户使用；rpm安装与yum类似，只不过安装的模块来源不是yum官方镜像，而是本地资源；</p> <p>这里采用的是<strong>用yum形式安装nginx服务器</strong></p> <h4 id="_1、安装前的准备"><a href="#_1、安装前的准备" class="header-anchor">#</a> 1、安装前的准备</h4> <p>在安装前，我们需要首先检查一下本机是否已经安装了nginx，我们查看一下nginx安装在什么路径就可以了，命令也很简单</p> <div class="language- extra-class"><pre class="language-text"><code>whereis    nginx      //nginx在哪里？
</code></pre></div><p>除了这句外还可以输入</p> <div class="language- extra-class"><pre class="language-text"><code>which   nginx
</code></pre></div><p>这两句话都可以找到你的服务器上安装的nginx在哪里。如果没有安装过，回车后会提示找不到相关路径，如果找到了就会返回所在的目录（一般是在/usr/local/sbin下）</p> <p><img src="http://upload-images.jianshu.io/upload_images/13908708-a16fddbf7e36c82f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>我这里分别查找iis和nginx是否存在（我已经安装了nginx）</p> <p>如果没有安装，那么接着看第二步，当然如果想卸载重装请看最后一步</p> <h4 id="_2、安装nginx"><a href="#_2、安装nginx" class="header-anchor">#</a> 2、安装nginx</h4> <p>安装方式特别简单，只需要输入yum install  nginx即可，类似于node下安装模块一下  npm  install  xxx</p> <div class="language- extra-class"><pre class="language-text"><code>yum   install   nginx
</code></pre></div><p>然后等待下载，下载过程中会自动安装最新版的nginx，并且在安装前提示是否确定安装，这时候输入y或者yes即可（别直接回车，因为默认是N）</p> <div class="language- extra-class"><pre class="language-text"><code>输入y    （确定安装）
</code></pre></div><p>如果在安装过程中说权限不足，通过sudo形式即可：<em>sudo    yum   install   nginx</em></p> <p>安装成功后提示nginx已经安装成功，默认情况下安装目录是**/usr/sbin/nginx**</p> <p>/usr是一个特别重要的的目录，可以理解从window下的C:\Program Files</p> <p>这时候我们通过which或者whereis可以查询到nginx的安装目录</p> <p><img src="http://upload-images.jianshu.io/upload_images/13908708-bc79182d52993d0d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>nginx  -v   检查nginx版本</p> <p>PS：由于yum默认把nginx安装到/usr/sbin下，这就相当于直接配置了系统变量，不需要在进行软连接配置了，可以直接使用。</p> <h4 id="_3、启动nginx"><a href="#_3、启动nginx" class="header-anchor">#</a> 3、启动nginx</h4> <p>nginx安装成功后不会自动启动的，需要我们人为去启动，启动命令如下</p> <div class="language- extra-class"><pre class="language-text"><code>systemctl   start   nginx
</code></pre></div><p>systemctl，就是执行系统操作，后面会经常用到</p> <p>当然机智的你已经猜到了重启和停止是什么命令了</p> <div class="language- extra-class"><pre class="language-text"><code>systemctl   restart   nginx

systemctl   stop   nginx
</code></pre></div><p>当然为了保证nginx的可持续提供服务，我建议再添加一句命令让nginx开机自启</p> <div class="language- extra-class"><pre class="language-text"><code>systemctl   enable   nginx
</code></pre></div><p><em>需要提醒一下的是，上面的命令在任意一个目录都是可以执行的，因为nginx已经配置到全局了，而下几篇介绍的nodejs、npm等就不一定都能执行了。</em></p> <p>启动成功后我们根据服务器ip（或者虚拟机ip），在浏览器中输入ip就可以看到相应信息了</p> <p><img src="http://upload-images.jianshu.io/upload_images/13908708-2267dd60a8487fb9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>默认信息</p> <h4 id="_4、修改配置"><a href="#_4、修改配置" class="header-anchor">#</a> 4、修改配置</h4> <p>在上一步我们启动nginx后在80端口可以看到这个默认信息，那么要怎么修改呢？其实我们只需要修改一下nginx的配置文件可以了</p> <p>补充一个知识点，/ect是linux下专门用来放配置文件的一个目录，我们通过whereis  nginx也可以知道nginx的配置在**/ect/nginx/**下</p> <p><img src="http://upload-images.jianshu.io/upload_images/13908708-f94c9f447f22191d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>whereis   nginx</p> <p>我们先cd进/ect/nginx目录（cd的时候前面加上/表示系统根目录，~表示用户根目录）</p> <p>然后我们查看一下该文件夹下有什么文件</p> <p><img src="http://upload-images.jianshu.io/upload_images/13908708-b618d7f0f814b441.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>ls</p> <p>我们的目标文件是<strong>nginx.conf</strong>，然后我们通过vim打开nginx.conf</p> <p><img src="http://upload-images.jianshu.io/upload_images/13908708-974f661ee2fe86c8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>vim   nginx.conf</p> <p>我们可以看到80端口对应的资源是/usr/share/nginx/html，这是一个nginx自带的一个html文件，也就是前面我们看到的那个页面。我们通过添加server节点就可以添加不同的网站，如下图：</p> <p><img src="http://upload-images.jianshu.io/upload_images/13908708-bbd996990e942b23.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>添加server节点</p> <p>当然这里你不需要和我一样添加，退出vim就可以了，因为我们现在还不需要修改。</p> <p>什么？不会退出？</p> <p>其实vim初看会和我们平常的编辑器不太一样，其实我们只需要记住两个模式，三个命令就可了</p> <p>两个模式：</p> <ul><li><p>工作模式</p></li> <li><p>命令模式</p></li></ul> <p>三个命令：</p> <ul><li><p>:q!     不保存强制退出</p></li> <li><p>:w       保存</p></li> <li><p>:wq    保存并退出</p></li></ul> <p>工作模式下同时插入字符，修改内容；命令模式下可以保存文档，退出编辑</p> <p>vim模式通过esc键切换，当底部不是“---insert----”后，输入:q!   即可退出</p> <p>如果需要修改往往是修改nginx.conf的静态资源指向和端口监听</p> <p>PS：这一步可以不做修改，只是简单看一下配置</p> <h4 id="_5、部署网站"><a href="#_5、部署网站" class="header-anchor">#</a> 5、部署网站</h4> <p>假设你已经在linux服务器上已经有了网站代码，我们可以通过修改nginx.conf来进行部署网站，如网站资源在/www/vue-base-demo/上，我们希望监听8080端口，那么我们在nginx.conf上添加一个server节点（在之前的80端口server节点后）</p> <div class="language- extra-class"><pre class="language-text"><code># vue最小管理系统配置（后台服务3000端口）  
    server {  
        listen      8080;  
        root        /www/vue-base-demo/;  
        index        index.html;  
        location / {}  
    }
</code></pre></div><p>然后我们重启nginx</p> <div class="language- extra-class"><pre class="language-text"><code>systemctl    resstart   nginx
</code></pre></div><p>这时候配置就会生效，在8080端口就可以访问到我们希望的页面了（后续可以添加域名指向）</p> <p><img src="http://upload-images.jianshu.io/upload_images/13908708-1bc69b8d7e43cf30.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>至于如何上传文件到linux服务器上，可以<a href="https://www.cnblogs.com/shijiaqi1066/p/3843207.html" target="_blank" rel="noopener noreferrer">使用pscp.exe上传<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，也可以使用git克隆</p> <p>需要注意两点：</p> <ul><li><p>第一：修改配置后需要重启nginx，否者不会生效</p></li> <li><p>第二：网站资源不要放在没有权限的目录下，<strong>如/root</strong>，建议在根目录下新建一个/www目录专门放在网站</p></li></ul> <p>都这里通过yum安装和部署nginx就结束了。</p> <h4 id="_6、卸载nginx"><a href="#_6、卸载nginx" class="header-anchor">#</a> 6、卸载nginx</h4> <p>当然了，在nginx配置失败的前提下，或者就是报错无法启动，又或者其他原因，不妨把它卸载重来。和npm类似，卸载非常简单，只需要一句命令</p> <div class="language- extra-class"><pre class="language-text"><code>yum   remove   nginx
</code></pre></div><p>这就卸载成功了，可以通过which  nginx或whereis  nginx来查看。</p> <p>传送门：《<a href="https://www.jianshu.com/p/21e42cd362e7" target="_blank" rel="noopener noreferrer">linux入门-nodejs的安装及配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>》</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/6/2020, 3:11:47 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/linux/how-to-install-nodejs.html" class="prev">nodejs的安装及配置</a></span> <span class="next"><a href="/linux/how-to-install-mysql.html">mysql的安装与使用</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3328e81d.js" defer></script><script src="/assets/js/2.c715c0f2.js" defer></script><script src="/assets/js/15.76570f77.js" defer></script>
  </body>
</html>
